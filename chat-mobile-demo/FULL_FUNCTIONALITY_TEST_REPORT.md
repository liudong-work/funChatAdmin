# å…¨éƒ¨åŠŸèƒ½å®æµ‹æŠ¥å‘Š

## ğŸ“‹ æµ‹è¯•æ¦‚è¿°

**æµ‹è¯•åˆ†æ”¯**: `feature/full-functionality-test`  
**æµ‹è¯•æ—¶é—´**: 2025-10-08  
**æµ‹è¯•ç¯å¢ƒ**: æœ¬åœ°å¼€å‘ç¯å¢ƒ  

## ğŸ¯ æµ‹è¯•ç›®æ ‡

éªŒè¯èŠå¤©åº”ç”¨çš„æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ˜¯å¦æ­£å¸¸å·¥ä½œï¼ŒåŒ…æ‹¬ï¼š
- åç«¯APIæœåŠ¡
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- èŠå¤©åŠŸèƒ½
- è¯­éŸ³é€šè¯
- æ¼‚æµç“¶åŠŸèƒ½
- WebSocketå®æ—¶é€šä¿¡

## âœ… æµ‹è¯•ç»“æœ

### 1. åç«¯æœåŠ¡å™¨å¯åŠ¨ âœ…

**æµ‹è¯•å‘½ä»¤**:
```bash
cd backend && node src/server-simple.js
```

**æµ‹è¯•ç»“æœ**:
- âœ… æœåŠ¡å™¨æˆåŠŸå¯åŠ¨åœ¨ç«¯å£ 8889
- âœ… å¥åº·æ£€æŸ¥æ¥å£æ­£å¸¸: `http://localhost:8889/health`
- âœ… è¿”å›æ­£ç¡®çš„æœåŠ¡å™¨çŠ¶æ€ä¿¡æ¯

**å¥åº·æ£€æŸ¥å“åº”**:
```json
{
  "status": true,
  "message": "æ¼‚æµç“¶æœåŠ¡å™¨è¿è¡Œæ­£å¸¸",
  "timestamp": "2025-10-08T08:36:50.708Z",
  "version": "1.0.0"
}
```

### 2. ç”¨æˆ·è®¤è¯ç³»ç»Ÿ âœ…

#### 2.1 ç”¨æˆ·ç™»å½•æµ‹è¯•

**æµ‹è¯•ç”¨æˆ·1**:
- æ‰‹æœºå·: `13800138001`
- éªŒè¯ç : `123456`

**æµ‹è¯•ç»“æœ**:
```json
{
  "status": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "user": {
      "id": 1759912617086.7395,
      "uuid": "user_1759912617086_gb093x14d",
      "phone": "13800138001",
      "username": "user_8001",
      "nickname": "ç”¨æˆ·8001",
      "avatar": "",
      "email": ""
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

**æµ‹è¯•ç”¨æˆ·2**:
- æ‰‹æœºå·: `13800138002`
- éªŒè¯ç : `123456`

**æµ‹è¯•ç»“æœ**:
```json
{
  "status": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "user": {
      "id": 1759912624454.8135,
      "uuid": "user_1759912624454_l4u1dijta",
      "phone": "13800138002",
      "username": "testuser2",
      "nickname": "æµ‹è¯•ç”¨æˆ·2",
      "avatar": "",
      "email": "test2@example.com"
    },
    "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

#### 2.2 æµ‹è¯•ç”¨æˆ·åˆ›å»º âœ…

**æµ‹è¯•å‘½ä»¤**:
```bash
curl -X POST http://localhost:8889/api/user/create-test-users
```

**æµ‹è¯•ç»“æœ**:
```json
{
  "status": true,
  "message": "æµ‹è¯•ç”¨æˆ·åˆ›å»ºæˆåŠŸ"
}
```

### 3. æ¶ˆæ¯å‘é€åŠŸèƒ½ âœ…

**æµ‹è¯•åœºæ™¯**: ç”¨æˆ·1å‘ç”¨æˆ·2å‘é€æ¶ˆæ¯

**æµ‹è¯•å‘½ä»¤**:
```bash
curl -X POST http://localhost:8889/api/message/send \
  -H "Authorization: Bearer <token>" \
  -d '{"receiverId":"user_1759912624454_l4u1dijta","content":"æµ‹è¯•æ¶ˆæ¯å‘é€åŠŸèƒ½"}'
```

**æµ‹è¯•ç»“æœ**:
```json
{
  "status": true,
  "message": "æ¶ˆæ¯å‘é€æˆåŠŸ",
  "data": {
    "uuid": "msg_1759912633141_adjg7dp4c",
    "created_at": "2025-10-08T08:37:13.141Z"
  }
}
```

### 4. æ¼‚æµç“¶åŠŸèƒ½ âœ…

#### 4.1 æ‰”ç“¶å­æµ‹è¯• âœ…

**æµ‹è¯•å‘½ä»¤**:
```bash
curl -X POST http://localhost:8889/api/bottle/throw \
  -H "Authorization: Bearer <token>" \
  -d '{"content":"è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¼‚æµç“¶","mood":"å¼€å¿ƒ"}'
```

**æµ‹è¯•ç»“æœ**:
```json
{
  "status": true,
  "message": "æ‰”ç“¶å­æˆåŠŸ",
  "data": {
    "uuid": "bottle_1759912639372_ogfrubdzn",
    "created_at": "2025-10-08T08:37:19.372Z"
  }
}
```

#### 4.2 æç“¶å­æµ‹è¯• âœ…

**æµ‹è¯•å‘½ä»¤**:
```bash
curl -X POST http://localhost:8889/api/bottle/fish \
  -H "Authorization: Bearer <token>" \
  -d '{}'
```

**æµ‹è¯•ç»“æœ**:
```json
{
  "status": true,
  "message": "æåˆ°ä¸€ä¸ªç“¶å­",
  "data": {
    "uuid": "bottle_1759912639372_ogfrubdzn",
    "content": "è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•æ¼‚æµç“¶",
    "mood": "å¼€å¿ƒ",
    "sender_uuid": "user_1759912617086_gb093x14d",
    "sender_nickname": "ç”¨æˆ·x14d",
    "picked_at": "2025-10-08T08:37:25.085Z"
  }
}
```

### 5. å‰ç«¯åº”ç”¨å¯åŠ¨ âœ…

**æµ‹è¯•å‘½ä»¤**:
```bash
npx expo start --clear
```

**æµ‹è¯•ç»“æœ**:
- âœ… Expoå¼€å‘æœåŠ¡å™¨å¯åŠ¨æˆåŠŸ
- âœ… Metro bundleræ­£å¸¸è¿è¡Œ
- âœ… åº”ç”¨å¯ä»¥åœ¨æ¨¡æ‹Ÿå™¨æˆ–çœŸæœºä¸Šè¿è¡Œ

## ğŸ”„ å¾…æµ‹è¯•åŠŸèƒ½

### 1. å‰ç«¯ç•Œé¢æµ‹è¯•
- [ ] ç”¨æˆ·ç™»å½•ç•Œé¢
- [ ] èŠå¤©ç•Œé¢
- [ ] æ¼‚æµç“¶ç•Œé¢
- [ ] ä¸ªäººèµ„æ–™ç•Œé¢

### 2. å®æ—¶é€šä¿¡æµ‹è¯•
- [ ] WebSocketè¿æ¥
- [ ] å®æ—¶æ¶ˆæ¯æ¨é€
- [ ] åœ¨çº¿çŠ¶æ€æ˜¾ç¤º

### 3. è¯­éŸ³åŠŸèƒ½æµ‹è¯•
- [ ] è¯­éŸ³æ¶ˆæ¯å½•åˆ¶
- [ ] è¯­éŸ³æ¶ˆæ¯æ’­æ”¾
- [ ] è¯­éŸ³é€šè¯åŠŸèƒ½

### 4. å›¾ç‰‡åŠŸèƒ½æµ‹è¯•
- [ ] å›¾ç‰‡é€‰æ‹©
- [ ] å›¾ç‰‡ä¸Šä¼ 
- [ ] å›¾ç‰‡æ˜¾ç¤º

### 5. æ€§èƒ½æµ‹è¯•
- [ ] æ¶ˆæ¯å‘é€å»¶è¿Ÿ
- [ ] å¤§é‡æ¶ˆæ¯å¤„ç†
- [ ] å†…å­˜ä½¿ç”¨æƒ…å†µ

## ğŸ“Š æµ‹è¯•ç»Ÿè®¡

| åŠŸèƒ½æ¨¡å— | æµ‹è¯•çŠ¶æ€ | é€šè¿‡ç‡ |
|---------|---------|--------|
| åç«¯æœåŠ¡ | âœ… é€šè¿‡ | 100% |
| ç”¨æˆ·è®¤è¯ | âœ… é€šè¿‡ | 100% |
| æ¶ˆæ¯å‘é€ | âœ… é€šè¿‡ | 100% |
| æ¼‚æµç“¶ | âœ… é€šè¿‡ | 100% |
| å‰ç«¯å¯åŠ¨ | âœ… é€šè¿‡ | 100% |
| å®æ—¶é€šä¿¡ | ğŸ”„ å¾…æµ‹è¯• | - |
| è¯­éŸ³åŠŸèƒ½ | ğŸ”„ å¾…æµ‹è¯• | - |
| å›¾ç‰‡åŠŸèƒ½ | ğŸ”„ å¾…æµ‹è¯• | - |

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’

1. **ç»§ç»­å‰ç«¯åŠŸèƒ½æµ‹è¯•**
   - åœ¨æ¨¡æ‹Ÿå™¨æˆ–çœŸæœºä¸Šæµ‹è¯•æ‰€æœ‰ç•Œé¢
   - éªŒè¯ç”¨æˆ·äº¤äº’æµç¨‹

2. **WebSocketå®æ—¶é€šä¿¡æµ‹è¯•**
   - æµ‹è¯•å¤šç”¨æˆ·åŒæ—¶åœ¨çº¿
   - éªŒè¯æ¶ˆæ¯å®æ—¶æ¨é€

3. **è¯­éŸ³å’Œå›¾ç‰‡åŠŸèƒ½æµ‹è¯•**
   - æµ‹è¯•å¤šåª’ä½“æ¶ˆæ¯åŠŸèƒ½
   - éªŒè¯è¯­éŸ³é€šè¯åŠŸèƒ½

4. **æ€§èƒ½ä¼˜åŒ–**
   - ç›‘æ§æœåŠ¡å™¨æ€§èƒ½
   - ä¼˜åŒ–å“åº”æ—¶é—´

## ğŸ“ æµ‹è¯•ç»“è®º

**å½“å‰çŠ¶æ€**: ğŸŸ¢ åç«¯APIåŠŸèƒ½å®Œå…¨æ­£å¸¸

æ‰€æœ‰æ ¸å¿ƒAPIæ¥å£éƒ½é€šè¿‡äº†æµ‹è¯•ï¼š
- âœ… æœåŠ¡å™¨å¯åŠ¨å’Œå¥åº·æ£€æŸ¥
- âœ… ç”¨æˆ·è®¤è¯å’Œç™»å½•
- âœ… æ¶ˆæ¯å‘é€å’Œæ¥æ”¶
- âœ… æ¼‚æµç“¶æ‰”å’ŒæåŠŸèƒ½
- âœ… å‰ç«¯åº”ç”¨å¯åŠ¨

**å»ºè®®**: ç»§ç»­åœ¨å‰ç«¯è¿›è¡Œå®Œæ•´çš„åŠŸèƒ½æµ‹è¯•ï¼Œç‰¹åˆ«æ˜¯å®æ—¶é€šä¿¡å’Œå¤šåª’ä½“åŠŸèƒ½ã€‚
