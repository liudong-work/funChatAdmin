# ğŸ“± Chat Mobile Demo - é¡¹ç›®ç»“æ„æ–‡æ¡£

## ğŸ¯ é¡¹ç›®æ¦‚è¿°

ä¸€ä¸ªåŸºäº React Native + Expo + Node.js çš„å³æ—¶é€šè®¯åº”ç”¨ï¼Œæ”¯æŒæ–‡æœ¬ã€è¯­éŸ³ã€å›¾ç‰‡æ¶ˆæ¯ï¼Œä»¥åŠæ¼‚æµç“¶ç¤¾äº¤åŠŸèƒ½ã€‚

---

## ğŸ“‚ é¡¹ç›®ç›®å½•ç»“æ„

```
chat-mobile-demo/
â”‚
â”œâ”€â”€ ğŸ“± å‰ç«¯ä»£ç  (React Native + Expo)
â”‚   â”œâ”€â”€ App.js                      # åº”ç”¨å…¥å£ï¼ŒWebSocket å…¨å±€ç®¡ç†
â”‚   â”œâ”€â”€ LoginScreen.js              # ç™»å½•é¡µé¢
â”‚   â”œâ”€â”€ RegisterScreen.js           # æ³¨å†Œé¡µé¢
â”‚   â”œâ”€â”€ HomeScreen.js               # é¦–é¡µï¼ˆæ¼‚æµç“¶åŠŸèƒ½ï¼‰
â”‚   â”œâ”€â”€ MessagesScreen.js           # æ¶ˆæ¯åˆ—è¡¨é¡µé¢
â”‚   â”œâ”€â”€ ChatDetailScreen.js         # èŠå¤©è¯¦æƒ…é¡µé¢ â­æ ¸å¿ƒ
â”‚   â”œâ”€â”€ ProfileScreen.js            # ä¸ªäººä¸­å¿ƒé¡µé¢
â”‚   â”œâ”€â”€ ChatScreen.js               # æ—§ç‰ˆèŠå¤©é¡µé¢
â”‚   â””â”€â”€ SimpleChatScreen.js         # ç®€åŒ–èŠå¤©é¡µé¢
â”‚
â”œâ”€â”€ âš™ï¸ é…ç½® & æœåŠ¡
â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â””â”€â”€ api.js                  # API å’Œ WebSocket åœ°å€é…ç½®
â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â””â”€â”€ apiService.js           # API è¯·æ±‚å°è£…æœåŠ¡
â”‚   â”œâ”€â”€ app.json                    # Expo åº”ç”¨é…ç½®
â”‚   â”œâ”€â”€ package.json                # å‰ç«¯ä¾èµ–ç®¡ç†
â”‚   â””â”€â”€ index.js                    # Expo å…¥å£æ–‡ä»¶
â”‚
â”œâ”€â”€ ğŸ¨ èµ„æºæ–‡ä»¶
â”‚   â””â”€â”€ assets/
â”‚       â”œâ”€â”€ icon.png                # åº”ç”¨å›¾æ ‡
â”‚       â”œâ”€â”€ adaptive-icon.png       # è‡ªé€‚åº”å›¾æ ‡
â”‚       â”œâ”€â”€ splash-icon.png         # å¯åŠ¨ç”»é¢
â”‚       â””â”€â”€ favicon.png             # ç½‘é¡µå›¾æ ‡
â”‚
â”œâ”€â”€ ğŸ–¥ï¸ åç«¯æœåŠ¡ (Node.js + Express + Socket.IO)
â”‚   â””â”€â”€ backend/
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ server-simple.js        # ç®€åŒ–ç‰ˆæœåŠ¡å™¨ â­å½“å‰ä½¿ç”¨
â”‚       â”‚   â”œâ”€â”€ server.js               # å®Œæ•´ç‰ˆæœåŠ¡å™¨
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ config/                 # é…ç½®ç›®å½•
â”‚       â”‚   â”‚   â”œâ”€â”€ config.js           # åº”ç”¨é…ç½®ï¼ˆç«¯å£ã€ç¯å¢ƒç­‰ï¼‰
â”‚       â”‚   â”‚   â”œâ”€â”€ logger.js           # æ—¥å¿—é…ç½®
â”‚       â”‚   â”‚   â””â”€â”€ database.js         # æ•°æ®åº“é…ç½®
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ middleware/             # ä¸­é—´ä»¶
â”‚       â”‚   â”‚   â”œâ”€â”€ auth.js             # JWT è®¤è¯ä¸­é—´ä»¶
â”‚       â”‚   â”‚   â””â”€â”€ cors.js             # CORS è·¨åŸŸé…ç½®
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ models/                 # æ•°æ®æ¨¡å‹
â”‚       â”‚   â”‚   â”œâ”€â”€ User.js             # ç”¨æˆ·æ¨¡å‹
â”‚       â”‚   â”‚   â”œâ”€â”€ Bottle.js           # æ¼‚æµç“¶æ¨¡å‹
â”‚       â”‚   â”‚   â””â”€â”€ index.js            # æ¨¡å‹å¯¼å‡º
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ controllers/            # æ§åˆ¶å™¨å±‚
â”‚       â”‚   â”‚   â””â”€â”€ userController.js   # ç”¨æˆ·æ§åˆ¶å™¨
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ routes/                 # è·¯ç”±å±‚
â”‚       â”‚   â”‚   â””â”€â”€ user.js             # ç”¨æˆ·è·¯ç”±
â”‚       â”‚   â”‚
â”‚       â”‚   â”œâ”€â”€ services/               # æœåŠ¡å±‚
â”‚       â”‚   â”‚   â””â”€â”€ userService.js      # ç”¨æˆ·æœåŠ¡
â”‚       â”‚   â”‚
â”‚       â”‚   â””â”€â”€ socket/                 # WebSocket å¤„ç†ï¼ˆæœªä½¿ç”¨ï¼‰
â”‚       â”‚
â”‚       â”œâ”€â”€ uploads/                    # ğŸ“ ä¸Šä¼ æ–‡ä»¶å­˜å‚¨
â”‚       â”‚   â”œâ”€â”€ img-*.jpeg              # ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡
â”‚       â”‚   â”œâ”€â”€ img-*.png               # ç”¨æˆ·ä¸Šä¼ çš„å›¾ç‰‡
â”‚       â”‚   â””â”€â”€ voice-*.m4a             # ç”¨æˆ·å½•åˆ¶çš„è¯­éŸ³
â”‚       â”‚
â”‚       â”œâ”€â”€ logs/                       # ğŸ“ æ—¥å¿—æ–‡ä»¶
â”‚       â”‚   â”œâ”€â”€ drift-bottle.log        # åº”ç”¨è¿è¡Œæ—¥å¿—
â”‚       â”‚   â””â”€â”€ drift-bottle-error.log  # é”™è¯¯æ—¥å¿—
â”‚       â”‚
â”‚       â”œâ”€â”€ package.json                # åç«¯ä¾èµ–ç®¡ç†
â”‚       â”œâ”€â”€ .env                        # ç¯å¢ƒå˜é‡é…ç½®
â”‚       â””â”€â”€ env-template.txt            # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â””â”€â”€ ğŸ“„ æ–‡æ¡£
    â”œâ”€â”€ README.md                   # é¡¹ç›®è¯´æ˜æ–‡æ¡£
    â”œâ”€â”€ IMAGE_FEATURE_TEST.md       # å›¾ç‰‡åŠŸèƒ½æµ‹è¯•æ–‡æ¡£
    â”œâ”€â”€ PROJECT_STRUCTURE.md        # é¡¹ç›®ç»“æ„æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
    â””â”€â”€ view-logs.sh                # æ—¥å¿—æŸ¥çœ‹è„šæœ¬

```

---

## ğŸ”‘ æ ¸å¿ƒæ–‡ä»¶è¯´æ˜

### å‰ç«¯æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|
| `ChatDetailScreen.js` | 1033 | èŠå¤©è¯¦æƒ…é¡µé¢ï¼ŒåŒ…å«æ–‡æœ¬/è¯­éŸ³/å›¾ç‰‡æ¶ˆæ¯çš„æ”¶å‘ |
| `App.js` | 374 | åº”ç”¨å…¥å£ï¼ŒWebSocket è¿æ¥å’Œå…¨å±€æ¶ˆæ¯å¤„ç† |
| `MessagesScreen.js` | - | æ¶ˆæ¯åˆ—è¡¨ï¼Œæ˜¾ç¤ºæ‰€æœ‰å¯¹è¯ |
| `HomeScreen.js` | - | é¦–é¡µï¼Œæ¼‚æµç“¶åŠŸèƒ½ |

### åç«¯æ ¸å¿ƒæ–‡ä»¶

| æ–‡ä»¶ | è¡Œæ•° | è¯´æ˜ |
|------|------|------|
| `server-simple.js` | 980 | ç®€åŒ–ç‰ˆæœåŠ¡å™¨ï¼Œå†…å­˜å­˜å‚¨ï¼ŒåŒ…å«æ‰€æœ‰åŠŸèƒ½ |
| `config/config.js` | - | é…ç½®ç®¡ç†ï¼ˆç«¯å£ã€ç¯å¢ƒã€WebSocketç­‰ï¼‰ |
| `middleware/cors.js` | - | CORS å’Œè¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶ |

---

## ğŸŒ æœåŠ¡åœ°å€

| æœåŠ¡ | åœ°å€ | è¯´æ˜ |
|------|------|------|
| HTTP API | `http://192.168.1.6:8889` | RESTful API æœåŠ¡ |
| WebSocket | `ws://192.168.1.6:8889` | å®æ—¶æ¶ˆæ¯æ¨é€ |
| Expo Metro | `http://192.168.1.6:8081` | Expo å¼€å‘æœåŠ¡å™¨ |

---

## ğŸ“Š ç»Ÿè®¡æ•°æ®

- **æ€»ä»£ç è¡Œæ•°**: ~3,919 è¡Œ
- **å‰ç«¯æ–‡ä»¶**: 10 ä¸ª JS æ–‡ä»¶
- **åç«¯æ–‡ä»¶**: 13 ä¸ª JS æ–‡ä»¶
- **ä¾èµ–åŒ…**: 63 ä¸ª
- **å·²ä¸Šä¼ å›¾ç‰‡**: 8 å¼ 

---

## ğŸš€ Git åˆ†æ”¯

| åˆ†æ”¯ | çŠ¶æ€ | åŠŸèƒ½ |
|------|------|------|
| `main` | âœ… ç¨³å®š | ä¸»åˆ†æ”¯ |
| `feature/voice-message` | âœ… å·²å®Œæˆ | è¯­éŸ³æ¶ˆæ¯åŠŸèƒ½ |
| `feature/image-upload` | âœ… å·²å®Œæˆ | å›¾ç‰‡æ¶ˆæ¯åŠŸèƒ½ï¼ˆå½“å‰ï¼‰ |

---

## ğŸ”§ å¿«é€Ÿå‘½ä»¤

### å¯åŠ¨æœåŠ¡
```bash
# å¯åŠ¨åç«¯
cd backend && node src/server-simple.js

# å¯åŠ¨å‰ç«¯
npx expo start --clear
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# å®æ—¶æŸ¥çœ‹åç«¯æ—¥å¿—
tail -f backend/logs/drift-bottle.log

# æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f backend/logs/drift-bottle-error.log
```

### Git æ“ä½œ
```bash
# æŸ¥çœ‹çŠ¶æ€
git status

# æäº¤ä»£ç 
git add .
git commit -m "message"
git push origin feature/image-upload
```

---

## ğŸ“ å¼€å‘æ—¥å¿—

- âœ… 2025-10-07: å®Œæˆå›¾ç‰‡æ¶ˆæ¯åŠŸèƒ½
- âœ… 2025-10-07: å®Œæˆè¯­éŸ³æ¶ˆæ¯åŠŸèƒ½
- âœ… 2025-10-07: ä¼˜åŒ–æ¶ˆæ¯å¯¹é½é€»è¾‘
- âœ… 2025-10-07: WebSocket æ€§èƒ½ä¼˜åŒ–

---

**æ›´æ–°æ—¶é—´**: 2025-10-07  
**å½“å‰ç‰ˆæœ¬**: v1.2.0 (å›¾ç‰‡æ¶ˆæ¯åŠŸèƒ½)
